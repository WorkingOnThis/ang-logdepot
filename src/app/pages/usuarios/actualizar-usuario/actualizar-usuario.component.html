<!-- <div class="card">
    <div class="card-body shadowgral">
        <form #f="ngForm" (ngSubmit)="guardar( f.value )" class="form-horizontal form-material">
            <div class="row">
                <div class="col-xl-6">
                    <h3 class="box-title m-b-15 titlesections p-3 pl-5" align="left">Datos de registro</h3>

                    <div class="formulario pt-5 pb-5 mb-4">
                        <div class="ml-4 mr-5 ">
                            <div class="form-group row text-center">

                                <label class="col-4 col-md-3 col-form-label">Nombre: </label>
                                <input [ngModel]="usuario.nombre" name="nombre" class="form-control col-8 col-md-9" type="text" required>

                            </div>
                            <div class="form-group row text-center">

                                <label class="col-4 col-md-3 col-form-label">Apellido: </label>
                                <input [ngModel]="usuario.apellido" name="apellido" class="form-control col-8 col-md-9" type="text" required>

                            </div>
                            <div class="form-group row text-center">
                                <label class="col-4 col-md-3 col-form-label">E-mail: </label>
                                <input [ngModel]="usuario.email" name="correo" class="form-control col-8 col-md-9" type="email" required>

                            </div>

                            <div class="form-group row text-center">

                                <label class="col-4 col-md-3 col-form-label">Empresa: </label>

                                <select [ngModel]="usuario.id_empresa" name="empresa" class="col-8 col-md-9 form-control">
                                    <option value="">Seleccione una empresa</option>
                                    <option *ngFor="let emp of empresas" [value]="emp._id">{{ emp.nombre }}</option>

                            </select>

                            </div>
                            <div class="form-group row text-center">
                                <label class="col-4 col-md-3 col-form-label">Rol: </label>
                                <select [ngModel]="usuario.role" name="role" class="col-8 col-md-9 form-control">
                                    <option value="">Seleccione un tipo de usuario</option>
                                    <option value="ROLE_USER">Usuario</option>
                                    <option value="ROLE_ADMIN">Administrador</option>
                            </select>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <br>
                <div class="col-xl-6">
                    <h3 class="box-title m-b-15 titlesections p-3 pl-5" align="left">Información adicional</h3>
                    <div class="formulario pt-5 pb-5 mb-4">
                        <div class="ml-4 mr-5">
                            <div class="form-group row text-center">
                                <label class="col-4 col-md-3 col-form-label">Cargo: </label>
                                <input [ngModel]="usuario.cargo" name="cargo" class="form-control col-8 col-md-9" type="text">

                            </div>
                            <div class="form-group row text-center">
                                <label class="col-4 col-md-3 col-form-label">Teléfono: </label>
                                <input [ngModel]="usuario.telefono" name="telefono" class="form-control col-8 col-md-9" type="number">

                            </div>
                            <div class="form-group row text-center">
                                <label class="col-4 col-md-3 col-form-label">DNI: </label>
                                <input [ngModel]="usuario.dni" name="dni" class="form-control col-8 col-md-9" type="number">

                            </div>

                        </div>
                    </div>
                    <br>
                    <div class="col-xs-12 text-center">
                        <button class="btn btn-info btn-lg botonactualizar" type="submit"><i class="fas fa-save font-18"></i> Guardar cambios</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div> -->

<!-- <div class="card">
    <div class="card-body shadowgral">
        <form [formGroup]="forma" (ngSubmit)="registrarUsuario()" class="form-horizontal form-material">
            <div class="row">
                <div class="col-xl-6">
                    <h3 class="box-title m-b-15 titlesections p-3 pl-5" align="left">Datos de registro</h3>

                    <div class="formulario pt-5 pb-5 mb-4">
                        <div class="ml-4 mr-5 ">
                            <div class="form-group row text-center">

                                <label class="col-5 col-md-4 form-label"><strong>Nombre: </strong></label>
                                <input formControlName="nombre" name="nombre" class="form-control col-7 col-md-8" type="text">

                            </div>
                            <div class="form-group row text-center">

                                <label class="col-5 col-md-4 form-label"><strong>Apellido: </strong></label>
                                <input formControlName="apellido" name="apellido" class="form-control col-7 col-md-8" type="text">

                            </div>
                            <div class="form-group row text-center">

                                <label class="col-5 col-md-4 form-label"><strong>Correo: </strong></label>
                                <input formControlName="correo" name="correo" class="form-control col-7 col-md-8" type="email">

                            </div>
                            <div class="form-group row text-center">
                                <label class="col-5 col-md-4 form-label"><strong>Empresa: </strong></label>
                                <select formControlName="empresa" name="empresa" class="col-7 col-md-8 form-control">
                                        <option *ngFor="let empresa of empresas" [value]="empresa._id">{{ empresa.nombre }}</option>
                                </select>
                            </div>
                            <div class="form-group row text-center">

                                <label class="col-5 col-md-4 form-label"><strong>Contraseña: </strong></label>
                                <input formControlName="password" name="password" class="form-control col-7 col-md-8" type="password">

                            </div>
                            <div class="form-group row text-center">

                                <label class="col-5 col-md-4 form-label"><strong>Confirmar contraseña: </strong></label>
                                <input formControlName="password2" name="password2" class="form-control col-7 col-md-8" type="password">

                            </div>
                            <div class="form-group row text-center" *ngIf="forma.errors?.sonIguales && !forma.pristine">
                                <label class="col-5 col-md-4 form-label"></label>
                                <p class="col-7 col-md-8 text-danger">
                                    Las contraseñas deben de ser iguales.
                                </p>
                            </div>

                            <div class="form-group row text-center">
                                <label class="col-5 col-md-4 form-label"><strong>Tipo de usuario: </strong></label>
                                <select formControlName="role" name="role" class="col-7 col-md-8 form-control">
                                    <option value="ROLE_USER">Usuario</option>
                                    <option value="ROLE_ADMIN">Administrador</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6">
                    <h3 class="box-title m-b-15 titlesections p-3 pl-5" align="left">Información adicional</h3>
                    <div class="formulario pt-5 pb-5 mb-4">
                        <div class="ml-4 mr-5">
                            <div class="form-group row text-center">
                                <label class="col-5 col-md-4 form-label"><strong>Cargo: </strong></label>
                                <input name="cargo" class="form-control col-7 col-md-8" type="text">

                            </div>
                            <div class="form-group row text-center">
                                <label class="col-5 col-md-4 form-label"><strong>Teléfono: </strong></label>
                                <input name="telefono" class="form-control col-7 col-md-8" type="number">

                            </div>
                            <div class="form-group row text-center">
                                <label class="col-5 col-md-4 form-label"><strong>DNI: </strong></label>
                                <input name="dni" class="form-control col-7 col-md-8" type="number">

                            </div>

                        </div>
                    </div>
                    <br>
                    <div class="col-xs-12 text-center">
                        <button class="btn btn-info btn-lg botonactualizar" type="submit"><i class="fas fa-save font-18"></i> Agregar usuario</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div> -->

<div class="row animated fadeIn">
        <div class="col-12">
            <div class="card">
                <div class="card-body shadowgral">
                    <mat-tab-group animationDuration="0ms" mat-stretch-tabs #matgroup>
                        <mat-tab label="General">
    
                            <form [formGroup]="general" autocomplete="off">
    
                                <div class="row mr-4 ml-4 justify-content-center ">
                                    <div class="col-sm-10 col-md-9 col-lg-8 col-xl-6 estanteSinSeleccionar text-center p-4 mt-4">
                                        Los campos marcados con asterisco son obligatorios.
                                    </div>
                                </div>
    
                                <div class="row mr-4 ml-4 mt-2 justify-content-left">
                                    
                                    <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                        <input [ngModel]="usuario.nombre" [formControl]="nombre_fc" matInput placeholder="*Nombre" type="text" min="0" step="1" autocomplete="off">
                                        <mat-error *ngIf="nombre_fc.invalid" class="text-center">{{getRequiredErrorMessage('nombre')}}</mat-error>
                                    </mat-form-field>
    
                                    <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                        <input [ngModel]="usuario.apellido" [formControl]="apellido_fc" matInput placeholder="*Apellido" type="text" autocomplete="off">
                                        <mat-error *ngIf="apellido_fc.invalid" class="text-center">{{getRequiredErrorMessage('apellido')}}</mat-error>
                                    </mat-form-field>
    
                                    <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                        <input [ngModel]="usuario.email" [formControl]="mail_fc" matInput placeholder="*E-mail" type="email" autocomplete="off">
                                        <mat-error *ngIf="mail_fc.invalid" class="text-center">{{getRequiredErrorMessage('mail')}}</mat-error>
                                    </mat-form-field>
    
                                    <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                        <mat-label>*Rol</mat-label>
                                        <mat-select [ngModel]="usuario.role" [formControl]="rol_fc">
                                            <mat-option value="ROLE_USER">Usuario</mat-option>
                                            <mat-option value="ROLE_ADMIN">Administrador</mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="rol_fc.invalid" class="text-center">{{getRequiredErrorMessage('rol')}}</mat-error>                                    
                                    </mat-form-field>
    
                                </div>
    
                                <div class="row mr-4 ml-4 mt-2 justify-content-left">
    
                                    <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                        <mat-label>*Empresa</mat-label>
                                        <mat-select [ngModel]="usuario.id_empresa" [formControl]="empresa_fc">
                                            <mat-option *ngFor="let empresa of empresas" [value]="empresa._id">{{ empresa.nombre }}</mat-option>
                                        </mat-select>
                                        <mat-error *ngIf="empresa_fc.invalid" class="text-center">{{getRequiredErrorMessage('empresa')}}</mat-error>
                                    </mat-form-field>
    
                                    <!-- <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                        <input [formControl]="empresa_fc" matInput placeholder="*Empresa" autocomplete="off">
                                        <mat-error *ngIf="empresa_fc.invalid" class="text-center">{{getRequiredErrorMessage('empresa')}}</mat-error>
                                    </mat-form-field> -->
    
                                    <!-- <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                        <input [formControl]="password_fc" matInput placeholder="*Password" type="password" minlength="8" autocomplete="off">
                                        <mat-error *ngIf="password_fc.invalid" class="text-center">{{getRequiredErrorMessage('password')}}</mat-error>
                                    </mat-form-field>
    
                                    <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                        <input [formControl]="password2_fc" matInput placeholder="*Confirmar password" type="password" autocomplete="off">
                                        <mat-error *ngIf="password2_fc.invalid" class="text-center">{{getRequiredErrorMessage('password2')}}</mat-error>
                                    </mat-form-field> -->
    
                                </div>
                            </form>
    
                            <div class="row mr-4 ml-4 mt-5 mb-2 justify-content-left">
    
                                <div class="col-12 mt-4">
                                    <button class="ml-1 pull-right" mat-flat-button color="primary" (click)="selectNext(matgroup)" [disabled]="general.invalid || general.controls.mail.status == 'PENDING'">Siguiente <i class="fas fa-chevron-right"></i></button>
                                </div>
                                <!-- <div class="col-12 mt-4">
                                    <button class="ml-1 pull-right" mat-flat-button color="primary" (click)="prueba()" >Siguiente <i class="fas fa-chevron-right"></i></button>
                                </div> -->
    
                            </div>
    
                        </mat-tab>
    
                        <mat-tab label="Adicional" [disabled]="general.invalid || general.controls.mail.status == 'PENDING'">
    
                        <form [formGroup]="adicional">
    
                            <div class="row mr-4 ml-4 justify-content-center ">
                                <div class="col-sm-10 col-md-9 col-lg-8 col-xl-6 estanteSinSeleccionar text-center p-4 mt-4">
                                    Los campos marcados con asterisco son obligatorios.
                                </div>
                            </div>    
                        
                            <div class="row mr-4 ml-4 mt-2 justify-content-left">
    
                                <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                    <input [ngModel]="usuario.cargo" [formControl]="cargo_fc" matInput placeholder="Cargo" type="text" autocomplete="off">
                                </mat-form-field>
    
                                <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                    <input [ngModel]="usuario.dni" [formControl]="dni_fc" matInput placeholder="DNI" type="number" autocomplete="off">
                                </mat-form-field>
    
                                <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                    <input [ngModel]="usuario.telefono" [formControl]="telefono_fc" matInput placeholder="Telefono" type="number" min="0" step="1" autocomplete="off">
                                </mat-form-field>
    
                                <mat-form-field class="col-sm-6 col-md-3 mt-4">
                                    <input [ngModel]="usuario.cuit" [formControl]="cuit_fc" matInput placeholder="Cuit" type="number" autocomplete="off">
                                </mat-form-field>
    
                            </div>
                            
                            <div class="row mr-4 ml-4 mt-2 justify-content-left">
    
                                <mat-form-field class="col-sm-12 col-md-6 mt-4">
                                    <input [ngModel]="usuario.direccion" [formControl]="direccion_fc" matInput placeholder="Dirección" type="text" autocomplete="off">
                                </mat-form-field>
    
                                <mat-form-field class="col-sm-12 col-md-6 mt-4">
                                    <input [ngModel]="usuario.observaciones" [formControl]="observaciones_fc" matInput placeholder="Observaciones" type="text" autocomplete="off">
                                </mat-form-field>
    
                            </div>
    
                        </form>
                        
                            <div class="row mr-4 ml-4 mt-5 mb-2 justify-content-left">
    
                                <div class="col-12 mt-4">
                                    <button class="ml-1 pull-left" mat-flat-button color="primary" (click)="selectPrev(matgroup)"><i class="fas fa-chevron-left"></i> Anterior</button>
                                    <button *ngIf="!addregisterspinner" class="ml-1 pull-right" mat-flat-button color="primary" (click)="registrarUsuario()">Actualizar</button>
                                    <button *ngIf="addregisterspinner" class="ml-1 pull-right" mat-flat-button color="primary">
                                        Actualizar &nbsp;
                                        <i class="fas fa-circle-notch fa-spin" style="margin-bottom:2px;"></i>
                                    </button>
                                </div>
                            </div>
    
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </div>
        </div>
    </div>